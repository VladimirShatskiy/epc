# Бот предназначен для загрузки фото/видео и документов

## Принцип работы
Бот является частью системы дилера по работе с заказ нарядами,
его задача на основании готовой базы с номерами заказ нарядов подгружать
под каждый из них требуемые материалы и отправлять фото и видео клиенту.
При этом используется весь функционал Телеграмма. т.е. все фотографии перед отправкой могут
быть отформатированы, помечены или на них выделены особые моменты на что 
стоит обратить внимание

Со стороны сотрудников сервиного центра. Есть два уровня доступа.
1) администратор, доступ при котором можно менять уровень доступа контактов из базы, + полный доступ сотрудника 
2) доступ сотрудника, возможность загружать под заказ наряды фото и видео материаллы
3) доступ клиента ограничен только возможностью принимать фото и видео отчеты сотрудников сервиса

Для подключения клиента к боту необходимо послать клиенту sms или иное сообщение с сылкой на бота.
Клиенту необходимо подключиться к боту, нажать на кнопку старт и согласиться с передачей контактой информации (номем телефона), посе чего сможет получать все материалы.

Клиент будет получать все материаллы из всех подпапок к заказ наряду за исключеним папки Service, в эту папку можно загружать материаллы для служебного пользования, клиенту они не пересылаются (под подпапками понимается стадии ремонта автомобиля: приемка автомобиля, кузовной ремонт, кузовные повреждения и т.д.)


### Подготовка со стороны дилера
Для корректной работы бота необходимо выделить отдельную директорию в хранилище 
в которой будут содержаться папки с названиями номеров заказ нарядов. 
Для бота необходимо указать путь на директорию изменив в файле config.py
значение переменой BRANCH_PHOTO

В случае указания в имени папок помимо номера заказ наряда, регистрационного номера автомобиля(через пробел)
бот при поиске необходимой папки для размещения материалов сможет найти необходимую папку как по части
номера заказ наряда так и по части регистрационного номера автомобиля.

При закрытии заказ наряда предусмотренно два варианта
1) удалить перенести папку из дирректории хранилища, в этом случае бот ее просто не увидит и не сможет в нее добавить информацию
2) в конце названия папки указать специальный символ '*' при этом бот будет данную папку игнорировать

По каждому машинозаезду материалы могут загружаться в подпапки к заказ наряду. 
Изменить количество подпапок можно в файле config.py в переменной TYPE_ORDER (формат dict)

Для связи с клиентом из базы дилера в каждую папку с заказ нарядом необходимо положить тектовый файл phone.txt указав в нем ногмер телефона цифрами без пробелов и специальных знаком. Например 7123464677

### Важно

При формировании календаря для выбора необходимого заказ наряда бот
смотрит дату создания папки с номером заказ наряда. Это стабильно работает на всех системах кроме linux
На Linux при изменении папки дата изменения приравнивается к дате создания, таким образом календарь бота
не будет корректно показывать созданные по датам заказ наряды

###### ***в случае вопросов готов прокомментировать shatskiy.v@inbox.ru***
